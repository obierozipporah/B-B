import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { useState } from 'react';
import { useLocation, useNavigate } from 'react-router-dom';
import { Lock, Phone, Mail } from 'lucide-react';
export default function Checkout() {
    const location = useLocation();
    const navigate = useNavigate();
    const bookingData = location.state || {};
    const [paymentData, setPaymentData] = useState({
        fullName: '',
        email: '',
        phone: '',
        paymentMethod: 'mpesa',
        mpesaNumber: '',
        address: '',
        specialRequests: ''
    });
    const [isProcessing, setIsProcessing] = useState(false);
    const calculateNights = () => {
        if (bookingData.checkIn && bookingData.checkOut) {
            const start = new Date(bookingData.checkIn);
            const end = new Date(bookingData.checkOut);
            const nights = Math.ceil((end.getTime() - start.getTime()) / (1000 * 60 * 60 * 24));
            return nights > 0 ? nights : 1;
        }
        return 1;
    };
    const nights = calculateNights();
    const roomPrice = bookingData.roomDetails?.price || 26.99;
    const subtotal = roomPrice * nights;
    const tax = subtotal * 0.1;
    const total = subtotal + tax;
    const handleSubmit = (e) => {
        e.preventDefault();
        setIsProcessing(true);
        // Simulate payment processing
        setTimeout(() => {
            setIsProcessing(false);
            alert('Booking request received! We will contact you shortly to confirm your reservation.');
            navigate('/');
        }, 2000);
    };
    if (!bookingData.roomDetails) {
        return (_jsx("div", { className: "min-h-screen flex items-center justify-center px-4", children: _jsxs("div", { className: "text-center", children: [_jsx("h2", { className: "text-2xl text-gray-900 mb-4", style: { fontFamily: 'Playfair Display, serif' }, children: "No Booking Selected" }), _jsx("p", { className: "text-gray-600 mb-6", children: "Please select a room from the availability page first." }), _jsx("button", { onClick: () => navigate('/availability'), className: "bg-[#5a8ca0] text-white px-8 py-3 rounded-lg hover:bg-[#4a7c8f] transition-colors", children: "Go to Availability" })] }) }));
    }
    return (_jsxs("div", { children: [_jsx("section", { className: "py-20 px-4 bg-linear-to-br from-[#5a8ca0] to-[#4a7c8f] text-white text-center", children: _jsxs("div", { className: "max-w-4xl mx-auto", children: [_jsx("h1", { className: "text-5xl mb-4", style: { fontFamily: 'Playfair Display, serif' }, children: "Complete Your Booking" }), _jsx("p", { className: "text-xl text-white/90", children: "Just a few more details to secure your reservation" })] }) }), _jsx("section", { className: "py-16 px-4 max-w-6xl mx-auto", children: _jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-3 gap-8", children: [_jsx("div", { className: "lg:col-span-2", children: _jsxs("form", { onSubmit: handleSubmit, className: "bg-white rounded-2xl shadow-lg p-8", children: [_jsx("h2", { className: "text-2xl text-gray-900 mb-6", style: { fontFamily: 'Playfair Display, serif' }, children: "Guest Information" }), _jsxs("div", { className: "space-y-6 mb-8", children: [_jsxs("div", { children: [_jsx("label", { className: "block text-sm text-gray-700 mb-2", children: "Full Name *" }), _jsx("input", { type: "text", value: paymentData.fullName, onChange: (e) => setPaymentData({ ...paymentData, fullName: e.target.value }), className: "w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-[#5a8ca0] bg-white", required: true })] }), _jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [_jsxs("div", { children: [_jsx("label", { className: "block text-sm text-gray-700 mb-2", children: "Email Address *" }), _jsx("input", { type: "email", value: paymentData.email, onChange: (e) => setPaymentData({ ...paymentData, email: e.target.value }), className: "w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-[#5a8ca0] bg-white", required: true })] }), _jsxs("div", { children: [_jsx("label", { className: "block text-sm text-gray-700 mb-2", children: "Phone Number *" }), _jsx("input", { type: "tel", value: paymentData.phone, onChange: (e) => setPaymentData({ ...paymentData, phone: e.target.value }), className: "w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-[#5a8ca0] bg-white", required: true })] })] }), _jsxs("div", { children: [_jsx("label", { className: "block text-sm text-gray-700 mb-2", children: "Address" }), _jsx("input", { type: "text", value: paymentData.address, onChange: (e) => setPaymentData({ ...paymentData, address: e.target.value }), className: "w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-[#5a8ca0] bg-white" })] }), _jsxs("div", { children: [_jsx("label", { className: "block text-sm text-gray-700 mb-2", children: "Special Requests" }), _jsx("textarea", { value: paymentData.specialRequests, onChange: (e) => setPaymentData({ ...paymentData, specialRequests: e.target.value }), rows: 3, className: "w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-[#5a8ca0] resize-none bg-white", placeholder: "Any special requirements or requests?" })] })] }), _jsx("h2", { className: "text-2xl text-gray-900 mb-6", style: { fontFamily: 'Playfair Display, serif' }, children: "Payment Method" }), _jsxs("div", { className: "space-y-4 mb-8", children: [_jsxs("label", { className: "flex items-center p-4 border-2 border-gray-300 rounded-lg cursor-pointer hover:border-[#5a8ca0] transition-colors", children: [_jsx("input", { type: "radio", name: "paymentMethod", value: "mpesa", checked: paymentData.paymentMethod === 'mpesa', onChange: (e) => setPaymentData({ ...paymentData, paymentMethod: e.target.value }), className: "w-5 h-5 text-[#5a8ca0]" }), _jsx("span", { className: "ml-3 text-gray-900", children: "M-Pesa" })] }), _jsxs("label", { className: "flex items-center p-4 border-2 border-gray-300 rounded-lg cursor-pointer hover:border-[#5a8ca0] transition-colors", children: [_jsx("input", { type: "radio", name: "paymentMethod", value: "cash", checked: paymentData.paymentMethod === 'cash', onChange: (e) => setPaymentData({ ...paymentData, paymentMethod: e.target.value }), className: "w-5 h-5 text-[#5a8ca0]" }), _jsx("span", { className: "ml-3 text-gray-900", children: "Cash (Pay at Property)" })] })] }), paymentData.paymentMethod === 'mpesa' && (_jsxs("div", { className: "mb-8", children: [_jsx("label", { className: "block text-sm text-gray-700 mb-2", children: "M-Pesa Number *" }), _jsx("input", { type: "tel", value: paymentData.mpesaNumber, onChange: (e) => setPaymentData({ ...paymentData, mpesaNumber: e.target.value }), placeholder: "254XXXXXXXXX", className: "w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-[#5a8ca0] bg-white", required: paymentData.paymentMethod === 'mpesa' }), _jsx("p", { className: "text-xs text-gray-600 mt-2", children: "You will receive an M-Pesa prompt to complete the payment" })] })), _jsxs("div", { className: "flex items-center gap-2 mb-6", children: [_jsx(Lock, { size: 16, className: "text-[#5a8ca0]" }), _jsx("p", { className: "text-sm text-gray-600", children: "Your information is secure and encrypted" })] }), _jsx("button", { type: "submit", disabled: isProcessing, className: "w-full bg-[#5a8ca0] text-white py-4 rounded-lg hover:bg-[#4a7c8f] transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-lg", children: isProcessing ? 'Processing...' : 'Confirm Booking' })] }) }), _jsx("div", { className: "lg:col-span-1", children: _jsxs("div", { className: "bg-white rounded-2xl shadow-lg p-8 sticky top-24", children: [_jsx("h2", { className: "text-2xl text-gray-900 mb-6", style: { fontFamily: 'Playfair Display, serif' }, children: "Booking Summary" }), _jsxs("div", { className: "mb-6", children: [_jsx("img", { src: bookingData.roomDetails.image, alt: bookingData.roomDetails.name, className: "w-full h-40 object-cover rounded-lg mb-4" }), _jsx("h3", { className: "text-lg text-gray-900 mb-1", children: bookingData.roomDetails.name }), bookingData.roomDetails.type && (_jsx("p", { className: "text-sm text-gray-600 mb-2", children: bookingData.roomDetails.type }))] }), _jsxs("div", { className: "space-y-3 mb-6 pb-6 border-b border-gray-200", children: [_jsxs("div", { className: "flex justify-between text-sm", children: [_jsx("span", { className: "text-gray-600", children: "Check-in" }), _jsx("span", { className: "text-gray-900", children: bookingData.checkIn ? new Date(bookingData.checkIn).toLocaleDateString() : 'Not selected' })] }), _jsxs("div", { className: "flex justify-between text-sm", children: [_jsx("span", { className: "text-gray-600", children: "Check-out" }), _jsx("span", { className: "text-gray-900", children: bookingData.checkOut ? new Date(bookingData.checkOut).toLocaleDateString() : 'Not selected' })] }), _jsxs("div", { className: "flex justify-between text-sm", children: [_jsx("span", { className: "text-gray-600", children: "Guests" }), _jsx("span", { className: "text-gray-900", children: bookingData.guests || 2 })] }), _jsxs("div", { className: "flex justify-between text-sm", children: [_jsx("span", { className: "text-gray-600", children: "Nights" }), _jsx("span", { className: "text-gray-900", children: nights })] })] }), _jsxs("div", { className: "space-y-3 mb-6 pb-6 border-b border-gray-200", children: [_jsxs("div", { className: "flex justify-between text-sm", children: [_jsxs("span", { className: "text-gray-600", children: ["$", roomPrice.toFixed(2), " \u00D7 ", nights, " ", nights === 1 ? 'night' : 'nights'] }), _jsxs("span", { className: "text-gray-900", children: ["$", subtotal.toFixed(2)] })] }), _jsxs("div", { className: "flex justify-between text-sm", children: [_jsx("span", { className: "text-gray-600", children: "Service charge (10%)" }), _jsxs("span", { className: "text-gray-900", children: ["$", tax.toFixed(2)] })] })] }), _jsxs("div", { className: "flex justify-between text-lg mb-6", children: [_jsx("span", { className: "text-gray-900", children: "Total" }), _jsxs("span", { className: "text-[#5a8ca0]", style: { fontFamily: 'Playfair Display, serif' }, children: ["$", total.toFixed(2)] })] }), _jsxs("div", { className: "bg-gray-50 p-4 rounded-lg", children: [_jsx("p", { className: "text-sm text-gray-700 mb-3", children: "Need help with your booking?" }), _jsxs("div", { className: "space-y-2", children: [_jsxs("a", { href: "tel:+254710393721", className: "flex items-center gap-2 text-sm text-[#5a8ca0] hover:text-[#4a7c8f]", children: [_jsx(Phone, { size: 16 }), "+254 710 393721"] }), _jsxs("a", { href: "mailto:birnelilochi25@gmail.com", className: "flex items-center gap-2 text-sm text-[#5a8ca0] hover:text-[#4a7c8f]", children: [_jsx(Mail, { size: 16 }), "Email Us"] })] })] })] }) })] }) })] }));
}
